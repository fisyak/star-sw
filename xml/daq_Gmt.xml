<?xml version="1.0" encoding="utf-8" ?>
<job maxFilesPerProcess="1" filesPerHour="1.0" fileListSyntax="paths" simulateSubmission ="false" copyInputLocally="false">
        <command>
         cd ${SUBMITTINGDIRECTORY}
   setenv STARFPE NO
#   setenv NODEBUG yes
#   setup 64b
#   starver TFG19a
#  echo $INPUTFILE0 | grep ':'
#  if (! $?) then
#    set evtsFile = `echo $INPUTFILE0 | awk -F\: '{print $1}'`
#    set f        = `echo $INPUTFILE0 | awk -F\: '{print $2}'`
#    set l        = `echo $INPUTFILE0 | awk -F\: '{print $3}'`
#  else
     set evtsFile = $INPUTFILE0;
     set f        = 1
     set l        = 5000000
#  endif
  foreach  evtsFile(`cat $FILELIST`) 
    echo "${evtsFile}"
    if (! -r ${evtsFile}) continue;
    set filel        = `basename $evtsFile .daq`
    set bf           = `basename $filel .root`
    set output  = ${bf}.event.root
    set logFile  = ${bf}B.log
#   if ( -r $logFile) continue;
#    set llogFile = log/${logFile}
#   if ( -r $llogFile) continue;
    if (-r $output) continue;
    set muFile = ${SUBMITTINGDIRECTORY}/${bf}.MuDst.root
    if (-r $muFile) continue;
    set mmuFile = ${SUBMITTINGDIRECTORY}/MuDst/${bf}.MuDst.root
    if (-r $mmuFile) continue;
#   cp ${evtsFile} ${SCRATCH}/
#   set input = ${SCRATCH}/${bf}.daq
    set bla = ${SUBMITTINGDIRECTORY}/${bf}.bla.root
    if (-r ${bla}) continue;
    touch ${bla}
    if (-r ${SUBMITTINGDIRECTORY}/Submitted) then 
      rm ${SUBMITTINGDIRECTORY}/Submitted
    endif
    set input = ${evtsFile};
#root.exe -q -b 'bfc.C(1000,"P2014,TpxRaw,TpxClu2D,-l3onl,-fpd,-hitfilt,mtd,btof,BEmcChkStat,CorrX,evout,NoHistos,noTags,noRunco,StiCA,KFVertex,McTpcAna","'${input}'","'$output'","'${bf}.root'")' &gt;&amp; ${logFile}
#root.exe -q -b 'bfc.C(1000,"P2018,TpxRaw,TpxClu,-l3onl,-fpd,-hitfilt,mtd,btof,BEmcChkStat,CorrX,evout,NoHistos,noTags,noRunco,StiCA,KFVertex,McTpcAna","'${input}'","'$output'","'${bf}.root'")' &gt;&amp; ${logFile}
#root.exe -q -b 'bfc.C(100000,"P2018a,-l3onl,-fpd,-hitfilt,mtd,btof,BEmcChkStat,OGridLeakFull,useCDV,CorrX,-evout,NoHistos,noTags,noRunco,StiCA,KFVertex","'${input}'")' &gt;&amp; ${logFile}
#root.exe -q -b 'bfc.C(100000,"P2018a,-l3onl,-fpd,-hitfilt,mtd,btof,BEmcChkStat,OGridLeakFull,useCDV,CorrX,OPr40,-evout,NoHistos,noTags,noRunco,StiCA,KFVertex,-picoWrite","'${input}'")' &gt;&amp; ${logFile}
#root.exe -q -b 'bfc.C(100000,"P2018a,gmt25,-l3onl,-fpd,-hitfilt,mtd,btof,BEmcChkStat,OGridLeakFull,CorrX,OPr40,evout,NoHistos,noTags,noRunco,StiCA,KFVertex,-picoWrite,-picoDst","'${input}'")' &gt;&amp; ${logFile}
#root.exe -q -b 'bfc.C(100000,"P2019,gmt25,-l3onl,-fpd,-hitfilt,mtd,btof,BEmcChkStat,OGridLeakFull,CorrX,OPr40,evout,NoHistos,noTags,noRunco,StiCA,KFVertex,-picoWrite,-picoDst","'${input}'")' &gt;&amp; ${logFile}
# root.exe -q -b 'bfc.C(100000,"P2019,TpxRaw,TpxClu,gmt25,-l3onl,-fpd,-hitfilt,mtd,btof,BEmcChkStat,OGridLeakFull,CorrX,OPr40,evout,NoHistos,noTags,noRunco,StiCA,KFVertex,-picoWrite,-picoDst","'${input}'")' &gt;&amp; ${logFile}
#root.exe -q -b 'bfc.C(100000,"P2019,gmt25,-l3onl,-fpd,-hitfilt,mtd,btof,OGridLeakFull,CorrX,OPr40,evout,NoHistos,noTags,noRunco,StiCA,-picoWrite,-picoDst","'${input}'")' &gt;&amp; ${logFile}
#root.exe -q -b 'bfc.C(100000,"P2019a,gmt25,-l3onl,-fpd,mtd,btof,OGridLeakFull,evout,NoHistos,noTags,noRunco,StiCA,-picoWrite,-picoDst","'${input}'")' &gt;&amp; ${logFile}
#root.exe -q -b 'bfc.C(100000,"P2019a,gmt25,-l3onl,-fpd,mtd,btof,OGridLeakFull,-evout,TpcAligner,NoHistos,noRunco,StiCA,-picoWrite,-picoDst","'${input}'")' &gt;&amp; ${logFile}
#root.exe -q -b 'bfc.C(100000,"P2019a,CorrZ,gmt25,gmtOnly,-l3onl,-fpd,mtd,btof,OGridLeakFull,-evout,NoHistos,noRunco,StiCA,-picoWrite,-picoDst","'${input}'")' &gt;&amp; ${logFile}
  set year = `GetYearFromPWD.pl`
  echo ${year} | grep 20
  if ($? != 0) exit 0;
 set Chain = "";
  switch ($year)
    case "2019":
      set Chain = "P2019a";
   breaksw
    case "2020":
      set Chain = "P2020a";
    breaksw
    case "2021":
      set Chain = "P2021a";
    breaksw
    case "2022":
      set Chain = "pp2022";
    breaksw
    case "2023":
      set Chain = "P2023";
    breaksw
    case "2024":
      set Chain = "pp2024a";
    breaksw
    default:
      exit 0;
  endsw
  set Chain = "${Chain},CorrZ,gmt25,gmtOnly,Agi,-l3onl,-fpd,mtd,btof,OGridLeakFull,-evout,NoHistos,noRunco,StiCA,-picoWrite,-picoDst,-fttDat,-fcs,-fcsDat,fcsWFF,-fcsCluster,-fcsPoint,-fcsdb"; #,noTags
  root.exe -b -q  'bfc.C(100000,"'${Chain}'","'${evtsFile}'")' &gt;&amp; ${logFile}
    cp -p ${logFile} ${SUBMITTINGDIRECTORY}/
    cp -p ${bf}*.root ${SUBMITTINGDIRECTORY}/
    rm ${SUBMITTINGDIRECTORY}/${bf}.bla.root
  end
        </command>
        <stdout URL="file:./sched$JOBID.log" />
        <stderr URL="file:./sched$JOBID.err" />
<!-- <input URL="file:/star/data03/daq/2018/*/*/st_cosmic_adc_*.daq" /> -->
<!-- <input URL="file:/star/data03/daq/2018/108/*/st_cosmic*.daq" /> -->
<!-- <input URL="file:/gpfs01/star/pwg/iraklic/iTPC/Cosmics/Cosmics2018/*event.root" /> -->
<!-- <input URL="file:/star/data03/daq/2018/108/19108054/st_cosmic_adc_19108054_raw_5500008.daq" /> -->
<!-- <input URL="file:/net/l401/data/scratch1/daq/2019/*/*/st_cosmic_*.daq" /> -->
<!-- <input URL="file:/net/l401/data/scratch1/daq/2019/019/*/st_cosmic_*.daq" /> -->
<!-- <input URL="file:/hlt/cephfs/daq/2019/*/*/st_cosmic_*.daq" /> -->
<!-- <input URL="command:2019Cosmic.pl" /> -->
<!-- <input URL="file:/gpfs01/star/daq/2019/116/20116019/*.daq" /> -->
<!-- <output fromScratch="*.root" toURL="file./"/> -->
<!-- <output fromScratch="*B.log" toURL="file:./"/> -->
<!-- <input URL="command:daq_2019T.pl" /> -->
<input URL="command:daqdR.local.pl" />
</job>
