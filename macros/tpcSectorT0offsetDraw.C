#include "TCanvas.h"
#include "TLegend.h"
#include "TGraph.h"
#include "TMultiGraph.h"
#include "TString.h"
#include "TROOT.h"
TMultiGraph *mg = 0;
//________________________________________________________________________________
void tpcSectorT0offsetDraw(TString opt="ofl", Int_t i1 = 2, Int_t i2 = 13) {
  struct row_t {
    const Char_t *beginTime;
    const Char_t *flavor;
    Double_t T0[48];
  };
  row_t rows[14] =     {
    {"2007-11-01 00:00:00","ofl",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-22.01910019,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-22.01910019,0,0,0,0,0,0,0,0},
    {"2008-01-28 00:00:00","ofl",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-22.25720024,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-22.25720024,0,0,0,0,0,0,0,0},
    {"2008-06-23 00:00:00","ofl",-22.25720024,-22.25720024,-22.25720024,-22.25720024,-22.25720024,-22.25720024,-22.25720024,-22.25720024,-22.25720024,-22.25720024,-22.25720024,-22.25720024,-22.25720024,-22.25720024,-22.25720024,-22.25720024,-22.25720024,-22.25720024,-22.25720024,-22.25720024,-22.25720024,-22.25720024,-22.25720024,-22.25720024,-22.25720024,-22.25720024,-22.25720024,-22.25720024,-22.25720024,-22.25720024,-22.25720024,-22.25720024,-22.25720024,-22.25720024,-22.25720024,-22.25720024,-22.25720024,-22.25720024,-22.25720024,-22.25720024,-22.25720024,-22.25720024,-22.25720024,-22.25720024,-22.25720024,-22.25720024,-22.25720024,-22.25720024},
    {"2017-12-15 00:00:02","sim",-22.27319908,-22.28120041,-22.30419922,-22.31920052,-22.28019905,-22.28720093,-22.26420021,-22.28120041,-22.25819969,-22.26119995,-22.29520035,-22.26919937,-22.24020004,-22.24020004,-22.24720001,-22.19420052,-22.16419983,-22.15019989,-22.25320053,-22.23419952,-22.22920036,-22.24220085,-22.22820091,-22.23119926,-22.31520081,-22.27020073,-22.29820061,-22.25020027,-22.28520012,-22.29820061,-22.27619934,-22.29520035,-22.29120064,-22.27619934,-22.28919983,-22.27319908,-22.26320076,-22.26420021,-22.2262001,-22.23819923,-22.16720009,-22.14419937,-22.19820023,-29.45120049,-22.22319984,-22.22820091,-22.23220062,-22.23419952 },
    {"2018-12-15 00:00:00","sim",-22.25720024,-22.25720024,-22.25720024,-22.25720024,-22.25720024,-22.25720024,-22.25720024,-22.25720024,-22.25720024,-22.25720024,-22.25720024,-22.25720024,-22.25720024,-22.25720024,-22.25720024,-22.25720024,-22.25720024,-22.25720024,-22.25720024,-22.25720024,-22.25720024,-22.25720024,-22.25720024,-22.25720024,-29.72170067,-29.72170067,-29.72170067,-29.72170067,-29.72170067,-29.72170067,-29.72170067,-29.72170067,-29.72170067,-29.72170067,-29.72170067,-29.72170067,-29.72170067,-29.72170067,-29.72170067,-29.72170067,-29.72170067,-29.72170067,-29.72170067,-29.72170067,-29.72170067,-29.72170067,-29.72170067,-29.72170067},
    {"2019-01-01 01:00:00","ofl",-22.2451992,-22.2548008,-22.26409912,-22.25690079,-22.24480057,-22.25219917,-22.21759987,-22.21089935,-22.26589966,-22.24780083,-22.25620079,-22.26049995,-22.25130081,-22.25970078,-22.25180054,-22.20809937,-22.16819954,-22.16909981,-22.27099991,-22.25830078,-22.24099922,-22.25049973,-22.24449921,-22.2371006,-27.8246994,-27.85740089,-27.83979988,-28.8234005,-27.83460045,-27.86470032,-27.81430054,-27.80290031,-27.83880043,-28.79700089,-27.83200073,-27.83539963,-27.80439949,-27.82220078,-27.8076992,-27.97240067,-27.84970093,-27.83639908,-27.85160065,-27.81999969,-27.8132,-27.80599976,-27.80629921,-28.7696991           },
    {"2019-01-01 01:07:06","ofl",-22.25589943,-22.26390076,-22.27000046,-22.26239967,-22.25919914,-22.25580025,-22.21960068,-22.21719933,-22.27869987,-22.25760078,-22.26759911,-22.26880074,-22.27700043,-22.28249931,-22.2737999,-22.23430061,-22.19179916,-22.19099998,-22.29380035,-22.28639984,-22.26910019,-22.27549934,-22.2602005,-22.26440048,-27.88120079,-27.91220093,-27.89929962,-28.88369942,-27.89579964,-27.91810036,-27.87050056,-27.86000061,-27.89419937,-28.8519001,-27.88850021,-27.89170074,-27.87759972,-27.8946991,-27.88100052,-28.04509926,-27.91930008,-27.90609932,-27.92070007,-27.8878994,-27.88260078,-27.8757,-27.87420082,-28.83919907         },
    {"2019-11-15 00:00:00","sim",-22.25720024,-22.25720024,-22.25720024,-22.25720024,-22.25720024,-22.25720024,-22.25720024,-22.25720024,-22.25720024,-22.25720024,-22.25720024,-22.25720024,-22.25720024,-22.25720024,-22.25720024,-22.25720024,-22.25720024,-22.25720024,-22.25720024,-22.25720024,-22.25720024,-22.25720024,-22.25720024,-22.25720024,-29.72170067,-29.72170067,-29.72170067,-29.72170067,-29.72170067,-29.72170067,-29.72170067,-29.72170067,-29.72170067,-29.72170067,-29.72170067,-29.72170067,-29.72170067,-29.72170067,-29.72170067,-29.72170067,-29.72170067,-29.72170067,-29.72170067,-29.72170067,-29.72170067,-29.72170067,-29.72170067,-29.72170067},
    {"2019-11-20 18:00:00","ofl",-22.26930046,-22.27759933,-22.29059982,-22.28219986,-22.29319954,-22.28030014,-22.24679947,-22.23119926,-22.2942009,-22.27869987,-22.29240036,-22.29490089,-22.29380035,-22.29990005,-22.2961998,-22.25909996,-22.21479988,-22.21369934,-22.32290077,-22.31069946,-22.29019928,-22.30179977,-22.29059982,-22.28879929,-27.89480019,-27.92630005,-27.9008007,-28.89500046,-27.90670013,-27.93059921,-27.8715992,-27.8593998,-27.90800095,-28.86389923,-27.89839935,-27.90500069,-27.88990021,-28.89170074,-27.89139938,-28.05879974,-27.93400002,-27.92219925,-27.93630028,-27.90789986,-27.89870071,-27.90460014,-27.88870049,-28.85379982     },
    {"2020-12-15 00:00:00","sim",-22.25720024,-22.25720024,-22.25720024,-22.25720024,-22.25720024,-22.25720024,-22.25720024,-22.25720024,-22.25720024,-22.25720024,-22.25720024,-22.25720024,-22.25720024,-22.25720024,-22.25720024,-22.25720024,-22.25720024,-22.25720024,-22.25720024,-22.25720024,-22.25720024,-22.25720024,-22.25720024,-22.25720024,-29.72170067,-29.72170067,-29.72170067,-29.72170067,-29.72170067,-29.72170067,-29.72170067,-29.72170067,-29.72170067,-29.72170067,-29.72170067,-29.72170067,-29.72170067,-29.72170067,-29.72170067,-29.72170067,-29.72170067,-29.72170067,-29.72170067,-29.72170067,-29.72170067,-29.72170067,-29.72170067,-29.72170067},
    {"2020-12-20 00:00:00","ofl",-22.26930046,-22.27759933,-22.29059982,-22.28219986,-22.29319954,-22.28030014,-22.24679947,-22.23119926,-22.2942009,-22.27869987,-22.29240036,-22.29490089,-22.29380035,-22.29990005,-22.2961998,-22.25909996,-22.21479988,-22.21369934,-22.32290077,-22.31069946,-22.29019928,-22.30179977,-22.29059982,-22.28879929,-27.89480019,-27.92630005,-27.9008007,-28.89500046,-27.90670013,-27.93059921,-27.8715992,-27.8593998,-27.90800095,-28.86389923,-27.89839935,-27.90500069,-27.88990021,-28.89170074,-27.89139938,-28.05879974,-27.93400002,-27.92219925,-27.93630028,-27.90789986,-27.89870071,-27.90460014,-27.88870049,-28.85379982     },
    {"2021-10-15 00:00:00","sim",-22.25720024,-22.25720024,-22.25720024,-22.25720024,-22.25720024,-22.25720024,-22.25720024,-22.25720024,-22.25720024,-22.25720024,-22.25720024,-22.25720024,-22.25720024,-22.25720024,-22.25720024,-22.25720024,-22.25720024,-22.25720024,-22.25720024,-22.25720024,-22.25720024,-22.25720024,-22.25720024,-22.25720024,-28.88855934,-28.88855934,-28.88855934,-28.88855934,-28.88855934,-28.88855934,-28.88855934,-28.88855934,-28.88855934,-28.88855934,-28.88855934,-28.88855934,-28.88855934,-28.88855934,-28.88855934,-28.88855934,-28.88855934,-28.88855934,-28.88855934,-28.88855934,-28.88855934,-28.88855934,-28.88855934,-28.88855934},
    {"2021-10-25 00:00:00","ofl",-22.21879959,-22.13190079,-22.25569916,-22.29290009,-22.27289963,-22.26199913,-22.46199989,-22.21249962,-22.28709984,-22.23590088,-22.28450012,-22.24740028,-22.33069992,-22.28569984,-22.27630043,-22.22290039,-22.19879913,-22.37689972,-22.3302002,-22.30069923,-22.25720024,-22.22929955,-22.21800041,-22.2758007,-28.87179947,-28.90180016,-28.86829948,-28.87229919,-28.88069916,-28.90940094,-28.84420013,-28.83709908,-28.88369942,-28.83849907,-28.86400032,-28.88559914,-28.8647995,-28.8715992,-28.87450027,-29.04129982,-28.91320038,-28.90069962,-28.91090012,-28.88610077,-28.87400055,-28.88559914,-28.86459923,-28.83029938    },
    {"2022-01-01 00:00:00","ofl",-22.17830086,-22.09690094,-22.21050072,-22.25110054,-22.22960091,-22.20400047,-22.49900055,-22.17110062,-22.20929909,-22.18350029,-22.24810028,-22.20630074,-22.28089905,-22.24939919,-22.23530006,-22.19680023,-22.15699959,-22.32769966,-22.28709984,-22.24189949,-22.21100044,-22.19820023,-22.18499947,-22.23929977,-28.86129951,-28.90340042,-28.87770081,-28.86829948,-28.88269997,-28.91139984,-28.8423996,-28.83160019,-28.88489914,-28.82250023,-28.87050056,-28.87549973,-28.8628006,-28.86919975,-28.87750053,-29.04840088,-28.91589928,-28.9029007,-28.90660095,-28.88549995,-28.87450027,-28.88730049,-28.87290001,-28.83180046   }
  };
  TCanvas *c1 = (TCanvas *) gROOT->GetListOfCanvases()->FindObject("c1");
  if (c1) c1->Clear();
  else    c1 = new TCanvas("c1","c1");
  mg = new TMultiGraph("T0","T0");
  TLegend *l = new TLegend(0.1,0.6,0.45,0.85);
  Double_t x[48] = {0};
  for (Int_t j = 0; j < 48; j++) x[j] = j+1;
  TString saee("axp");
  if (i2 > 13) i2 = 13;
  for (Int_t i = i1; i <= i2; i++) {
    if (opt != "" && TString(rows[i].flavor) != opt) continue;
    Int_t color = (i-i1)%8 + 1;
    Int_t marker = (i-i1)/8 + 22;
    Double_t y[48] = {0};
    for (Int_t j = 0; j < 48; j++) {
      if (j < 24 || i < 4) y[j] = rows[i].T0[j] +  22.28;  // ALTRO            "2020-12-20 00:00:00","ofl" 10
      else                 y[j] = rows[i].T0[j] +  27.92;  // SAMPA : +5.64 
    }
    TGraph *gr = new TGraph(48, x, y);
    gr->SetLineColor(0);
    gr->SetMarkerColor(color);
    //    gr->SetMarkerSize(2);
    gr->SetMarkerStyle(marker);
    mg->Add(gr);
    l->AddEntry(gr,Form("%2i %s %s",i,rows[i].beginTime,rows[i].flavor),"p");
  }
  mg->Draw("ap");
  l->Draw();
}
